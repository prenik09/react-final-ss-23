<html><head><title>How to crop image in round shape by using Cropper.js</title><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"/><meta name="viewport" content="width=device-width"/><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css"/><script defer="defer" src="/react-final-ss-23/static/js/main.93f91cc2.js"></script><link href="/react-final-ss-23/static/css/main.073c9b0a.css" rel="stylesheet"></head><style>.container{margin:20px auto;max-width:640px}img{max-width:100%}.cropper-face,.cropper-view-box{border-radius:50%}.cropper-view-box{outline:0;box-shadow:0 0 0 1px #39f}</style><body><div class="container"><div class="row"><div class="col-lg-6" align="center"><label onclick="start_cropping()">Browse image</label><div id="display_image_div"><img name="display_image_data" id="display_image_data" src="download.png" alt="Picture"></div><input type="hidden" name="cropped_image_data" id="cropped_image_data"><br><input type="file" name="browse_image" id="browse_image" class="form-control"></div><div class="col-lg-6" align="center"><label>Preview</label><div id="cropped_image_result"><img style="width:350px" src="download.png"/></div><br><button type="button" class="btn btn-success" id="crop_button">Crop</button> <button type="button" class="btn btn-danger" id="download_button" onclick="download()">Download</button> <button type="button" class="btn btn-warning" id="upload_button" onclick="upload()">Upload</button></div></div></div><script src="bundle1.js"></script><script src="https://code.jquery.com/jquery-3.5.1.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script><script>function getRoundedCanvas(e){var a=document.createElement("canvas"),t=a.getContext("2d"),n=500,i=500;return a.width=n,a.height=i,t.imageSmoothingEnabled=!0,t.drawImage(e,0,0,n,i),t.globalCompositeOperation="destination-in",t.beginPath(),t.arc(250,250,Math.min(n,i)/2,0,2*Math.PI,!0),t.fill(),a}function download(){var e=$("#cropped_image_result img").attr("src");Jimp.read("final1.png").then((function(a){Jimp.read(e).then((function(e){e.composite(a,0,0,(function(e,a){a.getBase64(Jimp.MIME_JPEG,(function(e,a){var t=document.createElement("a");t.href=a,t.download="final_image.jpg",t.click()}))}))}))}))}$("body").on("change","#browse_image",(function(e){var a=e.target.files,t=function(e){$("#display_image_div").html(""),$("#display_image_div").html('<img name="display_image_data" id="display_image_data" src="'+e+'" alt="Uploaded Picture">')};a&&a.length>0&&(file=a[0],URL?t(URL.createObjectURL(file)):FileReader&&(reader=new FileReader,reader.onload=function(e){t(reader.result)},reader.readAsDataURL(file)));var n=document.getElementById("display_image_data"),i=document.getElementById("crop_button"),d=document.getElementById("cropped_image_result"),o=!1,r=new Cropper(n,{aspectRatio:1,viewMode:1,ready:function(){o=!0}});i.onclick=function(){var e,a;o&&(e=getRoundedCanvas(r.getCroppedCanvas()),(a=document.createElement("img")).src=e.toDataURL(),d.innerHTML="",d.appendChild(a))}}))</script></body></html>